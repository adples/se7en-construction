on:
  push:
    branches:
    - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: restore timestamps
      uses: chetan/git-restore-mtime-action@v2
    - name: rsync deployments
      uses: burnett01/rsync-deployments@7.0.1
      with:
        switches: -avzrP --delete --exclude=".git*/" --exclude="theme/acf-json/"
        path: ./
        remote_path: /home/customer/www/robm303.sg-host.com/public_html/wp-content/themes/seven-construction
        remote_host: ssh.robm303.sg-host.com
        remote_port: 18765
        remote_user: u2404-nxg1y1tqeqqb
        remote_key: ${{ secrets.SSH_PRIVATE_KEY }}
